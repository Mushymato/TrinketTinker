<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Variant | TrinketTinker </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Variant | TrinketTinker ">
      
      
      <link rel="icon" href="../images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Mushymato/TrinketTinker/blob/main/guide/002-Variant.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/favicon.png" alt="TrinketTinker">
            TrinketTinker
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="variant">Variant</h1>

<p>In the base game certain companions such as the frog have different color variants. With this model, you can explicitly define a sprite sheet, texture size, and optionally a color for mask. The <a href="007.3-Trinket%20Colorizer%20and%20Anvil.html">trinket colorizer</a> can be used to reroll the trinket variable, but you can also add other machine rules or shop entries for purpose of obtaining trinket in a specific variant.</p>
<p>Variants can have alternate variants, which are automatically rechecked whenever the player changes locations, or when an <a href="004-Ability.html">ability</a> has <code>ProcAltVariant</code> set.</p>
<h2 id="sample">Sample</h2>
<pre><code class="lang-json">{
  &quot;Action&quot;: &quot;EditData&quot;,
  &quot;Target&quot;: &quot;mushymato.TrinketTinker/Tinker&quot;,
  &quot;TargetField&quot;: [
    &quot;{{ModId}}_Sample&quot;
  ],
  &quot;Entries&quot;: {
    &quot;Variants&quot;: [
      // This block is the top level Variant
      {
        &quot;Texture&quot;: &quot;&lt;texture asset name&gt;&quot;,
        &quot;TextureSourceRect&quot;: {&quot;X&quot;: &lt;int X&gt;, &quot;Y&quot;: &lt;int Y&gt;, &quot;Width&quot;: &lt;int Width&gt;, &quot;Height&quot;: &lt;int Height&gt;, },
        &quot;TextureExtra&quot;: &quot;&lt;additional texture asset name&gt;&quot;,
        &quot;TextureExtraSourceRect&quot;: {&quot;X&quot;: &lt;int X&gt;, &quot;Y&quot;: &lt;int Y&gt;, &quot;Width&quot;: &lt;int Width&gt;, &quot;Height&quot;: &lt;int Height&gt;, },
        &quot;ColorMask&quot;: &quot;&lt;hex color or monogame color name&gt;&quot;,
        &quot;Width&quot;: &lt;int width&gt;,
        &quot;Height&quot;: &lt;int height&gt;,
        &quot;Bounding&quot;: {&quot;X&quot;: &lt;int X&gt;, &quot;Y&quot;: &lt;int Y&gt;, &quot;Width&quot;: &lt;int Width&gt;, &quot;Height&quot;: &lt;int Height&gt;, },
        &quot;TextureScale&quot;: &lt;int scale&gt;,
        &quot;ShadowScale&quot;: &lt;int sclae&gt;,
        &quot;NPC&quot;: &quot;{{ModId}}_SampleNPC&quot;,
        &quot;Name&quot;: &quot;[LocalizedText Strings/NPCNames:{{ModId}}_SampleNPC]&quot;,
        &quot;Portrait&quot;: &quot;Portrait/{{ModId}}_SampleNPC&quot;,
        &quot;ShowBreathing&quot;: true|false,
        &quot;HatEquip&quot;: {
          &quot;AdjustDefault&quot;: &lt;default hat adjust&gt;,
          &quot;AdjustOnDirection&quot;: &lt;per direction adjust&gt;,
          &quot;AdjustOnFrame&quot;: &lt;per frame hat adjust&gt;,
          &quot;AdjustOnFrameExtra&quot;: &lt;per frame on extra sheet hat adjust&gt;,
          &quot;ScaleModifier&quot;: &lt;scale modifier&gt;,
          &quot;Source&quot;: &quot;Given&quot;|&quot;Temporary&quot;|&quot;Owner&quot;
        },
        &quot;LightSource&quot;: {
          // This block is LightSourceData
          &quot;Radius&quot;: &lt;float radius(size)&gt;,
          &quot;Index&quot;: &lt;int base game light map texture index&gt;,
          &quot;Texture&quot;: &quot;&lt;light map texture&gt;&quot;,
          &quot;Color&quot;: &quot;&lt;hex color or monogame color name&gt;&quot;,
        },
        &quot;TrinketSpriteIndex&quot;: &lt;int sprite index for trinket item when in this variant&gt;,
        &quot;TrinketNameArguments&quot;: [
          &quot;&lt;trinket name substitution 1&gt;&quot;,
          &quot;&lt;trinket name substitution 2&gt;&quot;,
          //...
        ],
        &quot;AttachedTAS&quot;: [
          &quot;&lt;tas id&gt;&quot;,
          //...
        ],
        &quot;AltVariants&quot;: {
          // These blocks are AltVariant
          &quot;&lt;alt variant key&gt;&quot;: {
            &quot;Texture&quot;: &quot;&lt;texture asset name&gt;&quot;,
            &quot;TextureSourceRect&quot;: {&quot;X&quot;: &lt;int X&gt;, &quot;Y&quot;: &lt;int Y&gt;, &quot;Width&quot;: &lt;int Width&gt;, &quot;Height&quot;: &lt;int Height&gt; },
            &quot;TextureExtra&quot;: &quot;&lt;additional texture asset name&gt;&quot;,
            &quot;TextureExtraSourceRect&quot;: {&quot;X&quot;: &lt;int X&gt;, &quot;Y&quot;: &lt;int Y&gt;, &quot;Width&quot;: &lt;int Width&gt;, &quot;Height&quot;: &lt;int Height&gt; },
            &quot;ColorMask&quot;: &quot;&lt;hex color or monogame color name&gt;&quot;,
            &quot;Width&quot;: &lt;int width&gt;,
            &quot;Height&quot;: &lt;int height&gt;,
            &quot;Bounding&quot;: {&quot;X&quot;: &lt;int X&gt;, &quot;Y&quot;: &lt;int Y&gt;, &quot;Width&quot;: &lt;int Width&gt;, &quot;Height&quot;: &lt;int Height&gt;, },
            &quot;TextureScale&quot;: &lt;float scale&gt;,
            &quot;ShadowScale&quot;: &lt;float scale&gt;,
            &quot;NPC&quot;: &quot;{{ModId}}_SampleNPC&quot;,
            &quot;Name&quot;: &quot;[LocalizedText Strings/NPCNames:{{ModId}}_SampleNPC]&quot;,
            &quot;Portrait&quot;: &quot;Portrait/{{ModId}}_SampleNPC&quot;,
            &quot;ShowBreathing&quot;: true|false,
            &quot;HatEquip&quot;: &lt;hat equip model&gt;,
            &quot;Condition&quot;: &quot;&lt;game state query&gt;&quot;,
            &quot;Priority&quot;: &lt;int priority&gt;
          },
          // more alt variants...
        }
      }
    ]
  }
}
</code></pre>
<h2 id="shared-fields">Shared Fields</h2>
<p>These fields are valid for both variant and alt variant.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Texture</code></td>
<td>string</td>
<td><strong>required</strong></td>
<td>Asset target of the loaded texture, should be a sprite sheet and needs to contain the relevant <a href="003.0-Direction.html">directional animation frames</a> for the motion.</td>
</tr>
<tr>
<td><code>TextureSourceRect</code></td>
<td>Rectangle</td>
<td><em>empty</em></td>
<td>Optional source rectangle for <code>Texture</code>, if only part of the texture should be used.</td>
</tr>
<tr>
<td><code>TextureExtra</code></td>
<td>string</td>
<td><em>null</em></td>
<td>Texture holding additional sprites for use in <a href="003.2-Animation%20Clips.html">AnimClip</a>. This allows you to keep trinket specific sprites on a separate asset, but conversely you cannot put basic directional animation sprites on this sheet, only anim clips.</td>
</tr>
<tr>
<td><code>TextureExtraSourceRect</code></td>
<td>Rectangle</td>
<td><em>empty</em></td>
<td>Optional source rectangle for <code>TextureExtra</code>, if only part of the texture should be used.</td>
</tr>
<tr>
<td><code>ColorMask</code></td>
<td>string</td>
<td><em>null</em></td>
<td>Color to apply on draw, for use with grayscale sprites.<br>Aside from RGB and hex values, monogame accepts <a href="https://docs.monogame.net/api/Microsoft.Xna.Framework.Color.html">named colors</a> and this mod accepts special value <code>&quot;Prismatic&quot;</code> for an animated color cycle.</td>
</tr>
<tr>
<td><code>Width</code></td>
<td>int</td>
<td>16</td>
<td>Width of 1 sprite on the sprite sheet.</td>
</tr>
<tr>
<td><code>Height</code></td>
<td>int</td>
<td>16</td>
<td>Height of 1 sprite on the sprite sheet.</td>
</tr>
<tr>
<td><code>Bounding</code></td>
<td>Rectangle</td>
<td><em>empty</em></td>
<td>Override the default bounding box calculated from texture bounds.</td>
</tr>
<tr>
<td><code>TextureScale</code></td>
<td>float</td>
<td>4</td>
<td>Texture draw scale, default is 4 like most things in the game.</td>
</tr>
<tr>
<td><code>ShadowScale</code></td>
<td>float</td>
<td>3</td>
<td>Size of the shadow to draw, 0 to disable shadow.</td>
</tr>
<tr>
<td><code>Portrait</code></td>
<td>string</td>
<td><em>null</em></td>
<td>A portrait texture for the <a href="005.1-Chatter.html">Chatter ability</a>, required to display a portrait and a name.</td>
</tr>
<tr>
<td><code>NPC</code></td>
<td>string</td>
<td><em>null</em></td>
<td>An NPC name (key of <code>Data/Characters</code>) to associate this variant with, used for the <a href="005.1-Chatter.html">Chatter ability</a>.</td>
</tr>
<tr>
<td><code>Name</code></td>
<td>string</td>
<td><em>null</em></td>
<td>A display name for the <a href="005.1-Chatter.html">Chatter ability</a>, used if there's no real <code>NPC</code>.</td>
</tr>
<tr>
<td><code>ShowBreathing</code></td>
<td>bool</td>
<td><em>null</em> (true)</td>
<td>If the NPC name is set and they have <code>Breather=true</code> along with a sprite size less than 16x32, apply the NPC &quot;breathing&quot; effect on this trinket companion.</td>
</tr>
<tr>
<td><code>HatEquip</code></td>
<td>HatEquipData</td>
<td><em>null</em></td>
<td>A data model defining how companion may wear hats.</td>
</tr>
</tbody>
</table>
<h3 id="top-level-variant">Top Level Variant</h3>
<p>The top level variant can have all shared fields, as well as:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>LightSource</code></td>
<td><code>LightSourceData</code></td>
<td><em>null</em></td>
<td>If set, display a light source. This light source is only visible to the owner.</td>
</tr>
<tr>
<td><code>TrinketSpriteIndex</code></td>
<td>int</td>
<td>-1</td>
<td>If set, alters the trinket item's sprite index to this. This is used to give the trinket different icon depending on the variant.</td>
</tr>
<tr>
<td><code>TrinketNameArguments</code></td>
<td>List&lt;string&gt;</td>
<td><em>null</em></td>
<td>If set, use these strings as the argument to the item name.</td>
</tr>
<tr>
<td><code>AttachedTAS</code></td>
<td>List&lt;string&gt;</td>
<td><em>null</em></td>
<td>If set, show <a href="006-Temporary%20Animated%20Sprite.html">temporary animated sprites</a> associated with this companion that follow them around. Note: at the moment sync only works properly for respawning temporary animated sprites.</td>
</tr>
<tr>
<td><code>AltVariants</code></td>
<td>Dictionary&lt;string, AltVariantData&gt;</td>
<td><em>null</em></td>
<td>A dictionary of alternate variants.</td>
</tr>
</tbody>
</table>
<h3 id="trinketspriteindex-and-trinketnamearguments">TrinketSpriteIndex and TrinketNameArguments</h3>
<p>These two fields are used to allow variants to have different name and icons.</p>
<p><em>TrinketSpriteIndex</em>: Changes the sprite index along with variant, meaning that if your trinket's texture is a sprite sheet with multiple item icon sprites, this can be used to point to a specific one. To make this work, put every icon associated with the variants of 1 trinket on 1 texture. You cannot change to a completely different texture, or use color masks.</p>
<p><em>TrinketNameArguments</em>: Adds substitute strings for use with <code>{0}</code> in <code>DisplayName</code>, for example:</p>
<pre><code class="lang-json">// Data/Trinkets
&quot;DisplayName&quot;: &quot;My Trinket {0} {1}&quot;,
// mushymato.TrinketTinker/Tinker
&quot;Variants&quot;: [
  {
    &quot;Texture&quot;: &quot;{{ModId}}/trinkets/red/water&quot;,
    &quot;TrinketNameArguments&quot;: [&quot;Red&quot;, &quot;Water&quot;],
  },
  {
    &quot;Texture&quot;: &quot;{{ModId}}/trinkets/blue/fire&quot;,
    &quot;TrinketNameArguments&quot;: [&quot;Blue&quot;, &quot;Fire&quot;],
  }
]
</code></pre>
<p>The resulting trinket can have these names:</p>
<ul>
<li><code>&quot;My Trinket Red Water&quot;</code>, for the first Variant</li>
<li><code>&quot;My Trinket Blue Fire&quot;</code>, for the second Variant</li>
</ul>
<h3 id="alt-variant-only">Alt Variant Only</h3>
<p>The alt variant in <code>AltVariants</code> can have all shared fields, as well as:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Condition</code></td>
<td>string</td>
<td><code>&quot;FALSE&quot;</code></td>
<td>A <a href="https://stardewvalleywiki.com/Modding:Game_state_queries">game state query</a> used to check if this alt variant should be selected. If you want to have an alt variant exclusively activate through <a href="004-Ability.html">ability</a> with <code>ProcAltVariant</code>, use <code>&quot;FALSE&quot;</code>.</td>
</tr>
<tr>
<td><code>Priority</code></td>
<td>int</td>
<td>0</td>
<td>Sort priority of this variant, higher number have their conditions checked first.</td>
</tr>
</tbody>
</table>
<p>Note that not all shared fields are required in alt variant, and any not set field will simply fall back to the value found in top level.</p>
<p>An example: Change the companion's appearance during winter.</p>
<pre><code class="lang-json">// assuming &quot;{{ModId}}/Companion&quot; and &quot;{{ModId}}/Companion_Winter&quot; are loaded
&quot;Variants&quot;: [
  {
    &quot;Texture&quot;: &quot;{{ModId}}/Companion&quot;,
    &quot;Width&quot;: 16,
    &quot;Height&quot;: 32,
    &quot;AltVariants&quot;: {
      &quot;WINTER&quot;: {
        // Since Width and Height is not set,
        // The alt variant inherits 16x36 from the base variant.
        &quot;Texture&quot;: &quot;{{ModId}}/Companion_Winter&quot;,
        &quot;Condition&quot;: &quot;SEASON Winter&quot;
      }
    }
  }
],
</code></pre>
<p><a href="004-Ability.html">Abilities</a> can explicitly set a specific variant, which bypasses <code>Condition</code>. If you want to make a special variant that only activates by ability proc, set the <code>Condition</code> to <code>&quot;FALSE&quot;</code> to exclude it from standard checks.</p>
<h3 id="lightsourcedata">LightSourceData</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Radius</code></td>
<td>float</td>
<td>2</td>
<td>Size of light source.</td>
</tr>
<tr>
<td><code>Index</code></td>
<td>int</td>
<td>1</td>
<td>Base game light source texture index.</td>
</tr>
<tr>
<td><code>Texture</code></td>
<td>string</td>
<td>1</td>
<td>Custom light map, must be loaded into game content.</td>
</tr>
<tr>
<td><code>Color</code></td>
<td>string</td>
<td><em>null</em></td>
<td>Light color name, accepts same values as <code>ColorMask</code>.</td>
</tr>
</tbody>
</table>
<p>This model defines how lights on the companion behaves.</p>
<h3 id="hatequipdata">HatEquipData</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AdjustDefault</code></td>
<td>HatEquipAdj</td>
<td><em>null</em></td>
<td>The default hat adjustment.</td>
</tr>
<tr>
<td><code>AdjustOnFrame</code></td>
<td>Dictionary&lt;int, HatEquipAdj&gt;</td>
<td><em>null</em></td>
<td>Hat adjustment for a specific frame.</td>
</tr>
<tr>
<td><code>AdjustOnFrameExtra</code></td>
<td>Dictionary&lt;int, HatEquipAdj&gt;</td>
<td><em>null</em></td>
<td>Hat adjustment for a specific frame, on <code>TextureExtra</code>.</td>
</tr>
<tr>
<td><code>AdjustOnDirection</code></td>
<td>Dictionary&lt;int, HatEquipAdj&gt;</td>
<td><em>null</em></td>
<td>Hat adjustment for a direction.</td>
</tr>
<tr>
<td><code>ScaleModifier</code></td>
<td>float</td>
<td>A modifier to the scale of hat, on top of the companion's scale.</td>
<td></td>
</tr>
<tr>
<td><code>Source</code></td>
<td>HatSourceMode</td>
<td>How the companion can obtain hat:<ul><li><b>Given</b>: You can give companion a hat via interact button while holding a hat, they will hold the hat until you swap it with another hat.</li><li><b>Temporary</b>: You can give companion a hat via interact button while holding a hat, they will get a copy of the hat, and it expires once unequiped/day ends.</li><li><b>Owner</b>: The companion will wear the same hat as you.</li></ul></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="hatequipadj">HatEquipAdj</h4>
<p>This is a record with 3 fields:</p>
<ul>
<li><code>Offset</code>: Pixel offset of the hat, calculate between the hat's center and the companion's center.</li>
<li><code>Frame</code>: Which hat frame to use (0 1 2 3) if not default.</li>
<li><code>Rotate</code>: Float rotation of hat.</li>
</ul>
<p>Instead of specifying the fields in model you can use a string like this: <code>&quot;12,12 f1 r0:</code> which is converted to <code>Offset={12,12}</code>, <code>Frame=1</code>, <code>Rotate=0</code>. Order is important, but it is fine to skip fields that you don't need (e.g. <code>&quot;12,12&quot;</code> is enough if you only want offset, <code>&quot;f1&quot;</code> enough if only you only need frame.).</p>
<p>The hat adjustment is checked in this order:</p>
<ul>
<li><code>AdjustOnFrame</code> or <code>AdjustOnFrameExtra</code> value for current frame</li>
<li><code>AdjustOnDirection</code> for current direction</li>
<li><code>AdjustDefault</code> is the default value</li>
</ul>
<p>If all 3 values have null for offset, then the hat will not be drawn that frame.</p>
<p><code>Offset</code>/<code>Frame</code>/<code>Rotate</code> are considered independently when it comes to inheritance. E.g. if there is an <code>AdjustOnFrame</code> entry with an <code>Offset</code> defined but no <code>Frame</code>, then the <code>Frame</code> from <code>AdjustOnDirection</code> is used.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>Usually, there's no need to have the same width and height in all variants, or the same scale. What does matter is having the right number of sprites for all your animation. That said Width and Height do come up when using <a href="003.2-Animation%20Clips.html">FrameOverrides on AnimClip, which is discussed on that page</a>.</li>
</ul>

</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <a href="https://github.com/Mushymato/TrinketTinker">Source</a>   <a href="https://www.nexusmods.com/stardewvalley/mods/29073">Nexus</a>
        </div>
      </div>
    </footer>
  </body>
</html>
