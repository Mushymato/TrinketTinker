<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Chatter | TrinketTinker </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Chatter | TrinketTinker ">
      
      
      <link rel="icon" href="../images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Mushymato/TrinketTinker/blob/main/guide/4.z.201-Chatter.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/favicon.png" alt="TrinketTinker">
            TrinketTinker
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="chatter">Chatter</h1>

<p>This ability is used to activate Chatter dialogue, which produces full dialogue boxes much like NPC dialogue.</p>
<p>Chatter data is stored on the <a href="1-Tinker.html">tinker asset</a>, as <code>Dictionary&lt;string, ChatterLinesData&gt;</code>, while the portrait, NPC, or display name is stored with <a href="2-Variant.html">variants</a>. On ability activation, one set of <code>ChatterLinesData</code> will be picked based on priority and <code>Condition</code>, then one line out of the list will be chosen.</p>
<h2 id="args"><a href="../api/TrinketTinker.Models.AbilityArgs.ChatterArgs.html">Args</a></h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ChatterPrefix</code></td>
<td>string</td>
<td><em>null</em></td>
<td>A string prefix, used to filter for a specific group of ChatterLinesData by their keys.</td>
</tr>
</tbody>
</table>
<h2 id="relevant-variant-data">Relevant Variant Data</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Portrait</code></td>
<td>string</td>
<td><em>null</em></td>
<td>A portrait texture, required to display a portrait and a name.</td>
</tr>
<tr>
<td><code>NPC</code></td>
<td>string</td>
<td><em>null</em></td>
<td>An NPC name (key of <code>Data/Characters</code>) to associate this variant with, used to derive the display name.</td>
</tr>
<tr>
<td><code>Name</code></td>
<td>string</td>
<td><em>null</em></td>
<td>A display name, used if there's no <code>NPC</code>.</td>
</tr>
</tbody>
</table>
<p>The reason why Portrait/NPC/Name is stored with variants is so that you can associate portraits with their sprite, much like the appearance system in vanilla.</p>
<p>For trinkets that are meant to be a real NPC (or has at least an anti-social NPC entry), using the <code>NPC</code> field is preferred as it will make the dialogue box compatible with portraiture.</p>
<h2 id="chatterlinesdata">ChatterLinesData</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Default</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Condition</code></td>
<td>string</td>
<td><code>&quot;TRUE&quot;</code></td>
<td>A <a href="https://stardewvalleywiki.com/Modding:Game_state_queries">game state query</a> used to check if this chatter should be picked. If you want to have chatter exclusively activate through <a href="4-Ability.html">ability</a> with <code>ProcChatterKey</code>, use <code>&quot;FALSE&quot;</code>.</td>
</tr>
<tr>
<td><code>Priority</code></td>
<td>int</td>
<td>0</td>
<td>Sort priority of this chatter, higher number have their conditions checked first.</td>
</tr>
<tr>
<td><code>Lines</code></td>
<td>List&lt;string&gt;</td>
<td><em>null</em></td>
<td>List of dialogue for this entry, this can be: <ul><li><a href="https://stardewvalleywiki.com/Modding:Dialogue">literal dialogue</a> (and i18n token)</li><li>translation key (e.g. <code>Characters/Dialogue/Abigail:Introduction</code>)</li><li><a href="https://stardewvalleywiki.com/Modding:Tokenizable_strings">tokenized text</a></li></ul></td>
</tr>
<tr>
<td><code>Responses</code></td>
<td>Dictionary&lt;string, string&gt;</td>
<td><em>null</em></td>
<td>Response keys, needed only if your dialogue has <code>$q</code> that point to responses.</td>
</tr>
</tbody>
</table>
<h3 id="choosing-the-next-dialogue-line">Choosing the next Dialogue Line</h3>
<p>The Chatter system has nothing to do with the vanilla NPC dialogue keys beyond ability to reuse the same strings via translation key.</p>
<ol>
<li>If the previous dialogue has not finished (i.e. <code>$e</code> is used), finish that dialogue first.</li>
<li>If a <code>ProcChatterKey</code> has been set and exists, skip the rest of the steps and pick that Chatter.</li>
<li>Chatter data is sorted by <code>Priority</code> (highest to lowest)</li>
<li>The first Chatter data that fits these conditions is picked:
<ul>
<li>Key starts with <code>ChatterPrefix</code> (if set)</li>
<li><code>Condition</code> evaluates to true</li>
<li>There are at least 1 <code>Lines</code> in this Chatter</li>
</ul>
</li>
<li>A random dialogue from <code>Lines</code> is chosen, with equal chance, it can repeat.</li>
</ol>
<h3 id="using-q-in-chatter">Using $q in Chatter</h3>
<p>Question depend on having key'd responses. To utilize this with Chatter, question goes in <code>Lines</code>, while matching response keys go in <code>Responses</code>.</p>
<p>(The following example is adapted from the <a href="https://stardewvalleywiki.com/Modding:Dialogue">official wiki</a>)</p>
<p>Example:</p>
<pre><code class="lang-json">&quot;DialogueWithQuestion&quot;: {
  &quot;Lines&quot;: [
    &quot;I think I'll go to the beach tomorrow!#$q 305/306 beachquestion_followup#Would you like to go with me?#$r 305 15 beachquestion_yes#Sure, I would love to!#$r 306 0 beachquestion_sorry#Oh, sorry, I've already made plans with someone else...#$r 306 -10 beachquestion_no#No thank you.&quot;
  ],
  &quot;Responses&quot;: {
    &quot;beachquestion_yes&quot;: &quot;Good! It's a date.$h&quot;,
    &quot;beachquestion_sorry&quot;: &quot;Oh. Darn. Okay.$6&quot;,
    &quot;beachquestion_no&quot;: &quot;Oh. Um. Sorry.$s&quot;,
    &quot;beachquestion_followup&quot;: &quot;$p 305#Tomorrow should be a lot of fun!$h|Hmm, I wonder if I can get someone to go with me...$s&quot;,
  }
}
</code></pre>
<p>Response keys are remembered, so after the first time the question is asked and answered, dialogue box will fall back to <code>beachquestion_followup</code> instead of offering choices.</p>

</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <a href="https://github.com/Mushymato/TrinketTinker">Source</a>   <a href="https://www.nexusmods.com/stardewvalley/mods/29073">Nexus</a>
        </div>
      </div>
    </footer>
  </body>
</html>
